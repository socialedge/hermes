<md-content layout="row" layout-fill>
    <md-whiteframe layout="column" flex="40" flex-gt-sm="30" style="padding: 0 15px;">
        <search-box position="left"
                    ng-model="view.search.filter"
                    on-change="$ctrl.searchRecords(term)">
        </search-box>
        <div style="position:relative; height: 100%; overflow: scroll" class="stops-list">
            <div style="position: absolute; width:100%">
                <md-list infinite-scroll="$ctrl.nextRecords(view.search.filter)"
                         infinite-scroll-disabled='$ctrl.isLastPage' infinite-scroll-container="'.stops-list'">
                    <resource-item item="record"
                                   item-title="name"
                                   item-labels="vehicleType"
                                   item-labels-translate="true"
                                   item-labels-i18n-prefix="shared.generic.vehicleType"
                                   item-labels-class="label-danger"
                                   item-on-edit="$ctrl.editRecord(item)"
                                   item-on-delete="$ctrl.deleteRecord(itemId)"
                                   ng-repeat="record in $ctrl.records">
                    </resource-item>
                    <div layout layout-align="center center">
                        <md-progress-circular ng-show="$ctrl.loading" class="md-accent"
                                              md-diameter="40"></md-progress-circular>
                    </div>
                </md-list>
                <div ng-show="!$ctrl.records.length && !$ctrl.loading" layout="column" layout-align="center center"
                     layout-margin="7">
                    <md-icon md-font-library="material-icons">cloud_off</md-icon>
                    <h3>{{'shared.data.empty' | translate}}</h3>
                </div>
                <div ng-show="$ctrl.isLastPage && $ctrl.records.length && !$ctrl.loading" layout="column"
                     layout-align="center center" layout-margin="7">
                    <md-icon md-font-library="material-icons">block</md-icon>
                    <h4>{{'shared.data.end' | translate}}</h4>
                </div>
            </div>
        </div>
    </md-whiteframe>
    <div flex="75">
        <map-locator markers="$ctrl.markers"
                     marker-clicked-callback="$ctrl.highlightStation(id)"
                     marker-move-callback="$ctrl.highlightStation(id)"
                     marker-moved-callback="$ctrl.moveStation(id, location)"
                     map-clicked-callback="$ctrl.unHighlightStation()"
                     action-title="{{'stops.create_here' | translate}}"
                     action-callback="$ctrl.createRecord(location)"></map-locator>
    </div>
</md-content>
