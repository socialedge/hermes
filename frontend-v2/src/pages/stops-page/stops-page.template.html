<md-content layout="row" layout-fill>
    <md-whiteframe layout="column" flex="25" style="padding: 0 15px;">
        <div layout="row" layout-align="center center">
            <md-input-container flex="grow" md-no-float class="md-block ng-animated-show">
                <md-icon md-font-library="material-icons">search</md-icon>
                <input ng-model="view.search.filter" type="text" ng-change="$ctrl.searchRecords(view.search.filter)"
                       placeholder="{{'shared.actions.search' | translate}}">
            </md-input-container>
            <md-button flex="noshrink" class="md-icon-button md-warn" aria-label="add">
                <md-icon ng-click="$ctrl.createRecord()" md-font-library="material-icons">add</md-icon>
            </md-button>
        </div>

        <div style="position:relative; height: 100%; overflow: scroll" class="stops-list">
            <div style="position: absolute; width:100%">
                <md-list infinite-scroll="$ctrl.nextRecords(view.search.filter)"
                         infinite-scroll-disabled='$ctrl.isLastPage' infinite-scroll-container="'.stops-list'">
                    <md-list-item class="md-2-line" ng-repeat="station in $ctrl.records">
                        <div class="md-list-item-text">
                            <h3>{{station.name}}</h3>
                            <p>
                                <span class="label label-danger"
                                      ng-repeat="vehicleTypeName in station.vehicleType">{{vehicleTypeName}}</span>
                            </p>
                            <md-icon class="md-secondary" ng-click="$ctrl.editRecord(station)"
                                     md-font-library="material-icons">create
                            </md-icon>
                            <md-icon class="md-secondary" ng-click="$ctrl.deleteRecord(station.id)"
                                     md-font-library="material-icons">delete
                            </md-icon>
                        </div>
                        <md-divider ng-if="!$last"></md-divider>
                    </md-list-item>
                    <div layout layout-align="center center">
                        <md-progress-circular ng-show="$ctrl.loading" class="md-accent"
                                              md-diameter="40"></md-progress-circular>
                    </div>
                </md-list>
                <div ng-show="!$ctrl.records.length && !$ctrl.loading" layout="column" layout-align="center center"
                     layout-margin="7">
                    <md-icon md-font-library="material-icons">cloud_off</md-icon>
                    <h3>{{'shared.data.empty' | translate}}</h3>
                </div>
                <div ng-show="$ctrl.isLastPage && $ctrl.records.length && !$ctrl.loading" layout="column"
                     layout-align="center center" layout-margin="7">
                    <md-icon md-font-library="material-icons">block</md-icon>
                    <h4>{{'shared.data.end' | translate}}</h4>
                </div>
            </div>
        </div>
    </md-whiteframe>
    <div flex="75">
        <map-locator markers="$ctrl.markers"></map-locator>
    </div>
</md-content>
