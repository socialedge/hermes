swagger: '2.0'
info:
  description: "The specification of a Hermes backend API for frontend and third party software"
  version: "1.5.4"
  title: "SocialEdge Hermes API"
  contact:
    email: "socialedge.team@gmail.com"
  license:
    name: "GNU General Public License, v3"
    url: "https://www.gnu.org/licenses/gpl-3.0.txt"
schemes:
  - "http"
consumes:
  - "application/vnd.hermes.v1.5.4.json"
produces:
  - "application/vnd.hermes.v1.5.4.json"
paths:
  /agencies:
    get:
      summary: "Lists all agencies from the system that the user has an access to"
      parameters:
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: A list of Agencies
          schema:
            type: array
            minItems: 0
            items:
              $ref: '#/definitions/AgencyDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    post:
      summary: "Creates new agency"
      parameters:
        - name: body
          in: body
          description: "Agency to add to the store"
          required: true
          schema:
            $ref: '#/definitions/AgencyDTO'
      responses:
        201:
          description: An Agency created
          schema:
            $ref: '#/definitions/AgencyDTO'
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /agencies/{id}:
    get:
      summary: Gets an Agency based by id
      parameters:
        - name: id
          in: path
          description: ID of an Agency to fetch
          required: true
          type: string
      responses:
        200:
          description: Agency fetched
          schema:
            $ref: '#/definitions/AgencyDTO'
        404:
          description: Agency not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    put:
      summary: Updates an agency
      parameters:
        - name: id
          in: path
          description: ID of an Agency to update
          required: true
          type: string
        - name: body
          in: body
          description: Partial Agency with new field values
          required: true
          schema:
            $ref: '#/definitions/AgencyDTO'
      responses:
        200:
          description: Agency created
          schema:
            $ref: '#/definitions/AgencyDTO'
        404:
          description: Agency not found
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    delete:
      summary: Deletes a single Agency by id
      parameters:
        - name: id
          in: path
          description: ID of an Agency to delete
          required: true
          type: string
      responses:
        204:
          description: Agency deleted
        404:
          description: Agency not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /stations:
    get:
      summary: Lists all Stations from the system that the user has access to
      parameters:
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: A list of Stations
          schema:
            type: array
            minItems: 0
            items:
              $ref: '#/definitions/StationDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    post:
      summary: Creates new Station
      parameters:
        - name: body
          in: body
          description: Station to add to the store
          required: true
          schema:
            $ref: '#/definitions/StationDTO'
      responses:
        201:
          description: A Station created
          schema:
            $ref: '#/definitions/StationDTO'
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /stations/{id}:
    get:
      summary: Returns a Stations based on a single ID
      parameters:
        - name: id
          in: path
          description: ID of a Station to fetch
          required: true
          type: string
      responses:
        200:
          description: Line fetched
          schema:
            $ref: '#/definitions/StationDTO'
        404:
          description: Station not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    put:
      summary: Updates a Station
      parameters:
        - name: id
          in: path
          description: ID of a Station to update
          required: true
          type: string
        - name: body
          in: body
          description: Partial Station with new field values
          required: true
          schema:
            $ref: '#/definitions/StationDTO'
      responses:
        200:
          description: Station created
          schema:
            $ref: '#/definitions/StationDTO'
        404:
          description: Station not found
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    delete:
      summary: Deletes a single Station based on the ID supplied
      parameters:
        - name: id
          in: path
          description: ID of a Station to delete
          required: true
          type: string
      responses:
        204:
          description: Station deleted
        404:
          description: Station not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /lines:
    get:
      summary: Lists all lines from the system that the user has access to
      parameters:
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: A list of Lines
          schema:
            type: array
            minItems: 0
            items:
              $ref: '#/definitions/LineDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    post:
      summary: Creates new Line
      parameters:
        - name: body
          in: body
          description: Line to add to the store
          required: true
          schema:
            $ref: '#/definitions/LineDTO'
      responses:
        201:
          description: A Line created
          schema:
            $ref: '#/definitions/LineDTO'
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /lines/{id}:
    get:
      summary: Returns a Line based on a single ID
      parameters:
        - name: id
          in: path
          description: ID of a Line to fetch
          required: true
          type: string
      responses:
        200:
          description: Line fetched
          schema:
            $ref: '#/definitions/LineDTO'
        404:
          description: Line not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    put:
      summary: Updates a Line
      parameters:
        - name: id
          in: path
          description: ID of a Line to update
          required: true
          type: string
        - name: body
          in: body
          description: Partial Line with new field values
          required: true
          schema:
            $ref: '#/definitions/LineDTO'
      responses:
        200:
          description: Line created
          schema:
            $ref: '#/definitions/LineDTO'
        404:
          description: Line not found
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    delete:
      summary: Deletes a single Line based on the ID supplied
      parameters:
        - name: id
          in: path
          description: ID of an Line to delete
          required: true
          type: string
      responses:
        204:
          description: Line deleted
        404:
          description: Line not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /schedules:
    get:
      description: Lists all Schedules from the system that the user has access to
      parameters:
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: A list of Schedules
          schema:
            type: array
            minItems: 0
            items:
              $ref: '#/definitions/ScheduleDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    post:
      summary: Creates a new Schedule
      parameters:
        - name: body
          in: body
          description: Schedule to add to the store
          required: true
          schema:
            $ref: '#/definitions/ScheduleDTO'
      responses:
        201:
          description: Schedule created
          schema:
            $ref: '#/definitions/ScheduleDTO'
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /schedules/{id}:
    get:
      description: Gets a schedule by id
      parameters:
        - name: id
          in: path
          description: ID of a Schedule to fetch
          required: true
          type: string
      responses:
        200:
          description: Schedule fetched
          schema:
            $ref: '#/definitions/ScheduleDTO'
        404:
          description: Schedule not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    put:
      summary: Updates a Schedule
      parameters:
        - name: id
          in: path
          description: ID of a Schedule to update
          required: true
          type: string
        - name: body
          in: body
          description: Partial Schedule with new field values
          required: true
          schema:
            $ref: '#/definitions/ScheduleDTO'
      responses:
        200:
          description: Schedule created
          schema:
            $ref: '#/definitions/ScheduleDTO'
        404:
          description: Schedule not found
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
    delete:
      summary: Deletes a schedule by id
      parameters:
        - name: id
          in: path
          description: ID of a schedule to delete
          required: true
          type: string
      responses:
        204:
          description: Schedule deleted
        404:
          description: Schedule not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /schedules/{id}/inboundTrips:
    get:
      summary: Lists all inbound Trips of the Schedule
      parameters:
        - name: id
          in: path
          description: ID of a Schedule
          required: true
          type: string
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: Inbound Trips of the Schedule with given Id
          schema:
            type: array
            items:
              $ref: '#/definitions/TripDTO'
        404:
          description: Schedule not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /schedules/{id}/outboundTrips:
    get:
      summary: Lists all outbound Trips of the Schedule
      parameters:
        - name: id
          in: path
          description: ID of a Schedule
          required: true
          type: string
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: Inbound Trips of the Schedule with given Id
          schema:
            type: array
            items:
              $ref: '#/definitions/TripDTO'
        404:
          description: Schedule not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /schedules/{id}/collisions:
    get:
      summary: Calculates collisions for a given Schedule
      parameters:
        - name: id
          in: path
          description: ID of a Schedule
          required: true
          type: string
        - name: "size"
          in: "query"
          description: "Limits an amount of entities per page"
          required: false
          type: "integer"
        - name: "page"
          in: "query"
          description: "Number of list page to display"
          required: false
          type: "integer"
        - name: "sort"
          in: "query"
          description: "Defines a sort params for the query e.g ?sort=name,ASC"
          required: false
          type: "string"
      responses:
        200:
          description: Collisions for a given Schedule
          schema:
            type: array
            items:
              $ref: '#/definitions/CollisionDTO'
        404:
          description: Schedule not found
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
  /collisions:
    post:
      summary: Calculates collisions for a given Stop
      parameters:
        - name: body
          in: body
          description: Stop object to calculate collisions for
          required: true
          schema:
            $ref: '#/definitions/StopDTO'
      responses:
        200:
          description: Collisions for a given Stop
          schema:
            type: array
            items:
              $ref: '#/definitions/CollisionDTO'
        400:
          description: Problem with the request, such as a missing, invalid or type mismatched parameter
          schema:
            $ref: '#/definitions/FailureDTO'
        500:
          description: Internal server error, please contact support
          schema:
            $ref: '#/definitions/FailureDTO'
definitions:
  LocationDTO:
    type: object
    properties:
      latitude:
        type: number
        format: double
      longitude:
        type: number
        format: double
  AgencyDTO:
    type: object
    description: >-
      An Agency is an operator of a public transit network, often a public
      authority.
    properties:
      id:
        type: string
      name:
        type: string
      language:
        type: string
      timeZone:
        type: string
      phone:
        type: string
      url:
        type: string
      _links:
        type: object
        readOnly: true
        properties:
          self:
            $ref: '#/definitions/LinkDTO'
  StationDTO:
    type: object
    description: >-
      A stop is a location where vehicles stop to pick up or drop off
      passengers.
    properties:
      id:
        type: string
      name:
        type: string
      description:
        type: string
      vehicleType:
        type: array
        items:
          type: string
      location:
        $ref: '#/definitions/LocationDTO'
      dwell:
        type: number
        format: double
      _links:
        type: object
        readOnly: true
        properties:
          self:
            $ref: '#/definitions/LinkDTO'
  LineDTO:
    type: object
    description: >-
      Lines represents a group of Routes that are displayed to riders as a
      single service.
    properties:
      id:
        type: string
      agency:
        type: string
        description: (writeOnly) Either id or a link to an Agency
      name:
        type: string
      description:
        type: string
      vehicleType:
        type: string
        default: BUS
      url:
        type: string
      inboundRoute:
        type: array
        items:
          $ref: '#/definitions/RouteDTO'
      outboundRoute:
        type: array
        items:
          $ref: '#/definitions/RouteDTO'
      _links:
        type: object
        readOnly: true
        properties:
          self:
            $ref: '#/definitions/LinkDTO'
          agency:
            $ref: '#/definitions/LinkDTO'
  RouteDTO:
    type: array
    minItems: 1
    uniqueItems: true
    description: >-
      Transit Routes define waypoints for a journey taken by a vehicle along a
      transit line.
    items:
      $ref: '#/definitions/SegmentDTO'
  SegmentDTO:
    type: object
    description: 'Represents an edge of the journey graph, defined by Route'
    properties:
      start:
        type: string
        description: (writeOnly) Either id or a link to a Station
      end:
        type: string
        description: (writeOnly) Either id or a link to a Station
      length:
        type: number
        format: double
      waypoints:
        type: array
        description: Contains all waypoints required to travel from Segment start to end
        items:
          $ref: '#/definitions/LocationDTO'
      _links:
        type: object
        readOnly: true
        properties:
          start:
            $ref: '#/definitions/LinkDTO'
          end:
            $ref: '#/definitions/LinkDTO'
  ScheduleDTO:
    type: object
    properties:
      id:
        type: string
      description:
        type: string
      line:
        type: string
        description: (writeOnly) Either id or a link to a Line
      outboundTrips:
        type: array
        description: (writeOnly) Outbound trips
        items:
          $ref: '#/definitions/TripDTO'
      inboundTrips:
        type: array
        description: (writeOnly) Inbound trips
        items:
          $ref: '#/definitions/TripDTO'
      availability:
        $ref: '#/definitions/Availability'
      _links:
        type: object
        readOnly: true
        properties:
          self:
            $ref: '#/definitions/LinkDTO'
          line:
            $ref: '#/definitions/LinkDTO'
          outboundTrips:
            $ref: '#/definitions/LinkDTO'
          inboundTrips:
            $ref: '#/definitions/LinkDTO'
  AvailabilityDTO:
    type: object
    description: >-
      Defines a range of dates between which the {@link Schedule} is available
      and the days of the week when it is available (such as Monday through
      Friday). It also may define specific days when a trip is not available,
      such as holidays.
    properties:
      dayOfWeek:
        type: array
        minItems: 1
        items:
          type: string
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      exceptionDays:
        type: array
        items:
          type: string
          format: date
  TripDTO:
    type: object
    description: A Trip represents a journey taken by a vehicle through Stations.
    properties:
      vehicleId:
        type: integer
      stops:
        type: array
        items:
          $ref: '#/definitions/StopDTO'
  StopDTO:
    type: object
    description: >-
      Defines when a vehicle arrives at a Station, how long it stays there, and
      when it departs.
    properties:
      name:
        type: string
        description: Name of the Station
        readOnly: true
      station:
        type: string
        description: (writeOnly) Either id or a link to a Station
      arrival:
        type: string
        format: date
      departure:
        type: string
        format: date
      _links:
        type: object
        readOnly: true
        properties:
          station:
            $ref: '#/definitions/LinkDTO'
  CollisionDTO:
    type: object
    description: Describes a collision for a given Stop
    properties:
      description:
        type: string
        description: Usually contains a name of a Schedule that a given Stop collides with
      givenStop:
        type: object
        properties:
          arrival:
            type: string
            format: date
          departure:
            type: string
            format: date
      collidingStop:
        type: object
        properties:
          arrival:
            type: string
            format: date
          departure:
            type: string
            format: date
      _links:
        type: object
        readOnly: true
        properties:
          station:
            $ref: '#/definitions/LinkDTO'
          schedule:
            $ref: '#/definitions/LinkDTO'
  FailureDTO:
    type: object
    description: Describes a failure occured
    properties:
      type:
        type: string
        description: A java exception class name
      description:
        type: string
  LinkDTO:
    type: object
    description: The HAL link
    properties:
      id:
        type: string
        description: the id of a related resource
      href:
        type: string
        description: the full reference to a related resource
      name:
        type: string
        description: a reference to a related resource as secondary identifier
      title:
        type: string
        description: a human readable reference to a related resource
      type:
        type: string
        description: the specific content-type including version and concept
